<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard â€¢ Online Test Portal</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header class="header">
    <div class="container navbar">
      <a class="brand" href="index.html">
        <div class="logo">OT</div>
        <span>Online Test Portal</span>
      </a>
      <nav class="navlinks">
        <a href="index.html">Home</a>
        <a href="index.html#about">About</a>
        <a href="login.html">Login</a>
        <a href="register.html">Register</a>
      </nav>
      <select class="nav-select" onchange="if(this.value) window.location.href=this.value">
        <option value="index.html">Home</option>
        <option value="index.html#about">About</option>
        <option value="login.html">Login</option>
        <option value="register.html">Register</option>
      </select>
    </div>
  </header>

  <main class="section">
    <div class="container layout">
      <aside class="sidebar">
        <div class="card">
          <div class="card-body">
            <nav>
              <ul class="menu">
                <li><a class="active" href="dashboard.html">Dashboard</a></li>
                <li><a href="instructions.html">Take Test</a></li>
                <li><a href="#" onclick="showResults()">Results</a></li>
                <li><a href="index.html">Logout</a></li>
              </ul>
            </nav>
          </div>
        </div>
      </aside>

      <section>
        <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));">
          <div class="card"><div class="card-body">
            <h3 class="card-title">Your Profile</h3>
            <p class="text-muted">Name: <strong id="p-name">Guest User</strong></p>
            <p class="text-muted">Email: <strong id="p-email">guest@example.com</strong></p>
          </div></div>

          <div class="card"><div class="card-body">
            <h3 class="card-title">Recent Activity</h3>
            <p class="text-muted">Last Login: Today</p>
            <p class="text-muted">Last Test: <span id="last-test">None yet</span></p>
          </div></div>
        </div>

        <div class="card mt-4">
          <div class="card-body">
            <h3 class="card-title">Recent Tests</h3>
            <table class="table">
              <thead>
                <tr>
                  <th>Test</th>
                  <th>Date</th>
                  <th>Score</th>
                </tr>
              </thead>
              <tbody id="recent-body">
                <tr><td colspan="3" class="text-muted">No tests taken yet</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    function showResults(){
      const data = JSON.parse(localStorage.getItem('otp_result')||'null');
      const body = document.getElementById('recent-body');
      if(!data){ body.innerHTML = '<tr><td colspan="3" class="text-muted">No results found</td></tr>'; return; }
      document.getElementById('last-test').textContent = new Date(data.date).toLocaleString();
      body.innerHTML = '<tr><td>General Quiz</td><td>'+ new Date(data.date).toLocaleDateString() +'</td><td>'+ data.score +'/'+ data.total +'</td></tr>'
    }
    showResults();
  </script>
</body>
</html>
